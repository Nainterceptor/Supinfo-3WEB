<!Doctype html>
<html>
<head>
    <script src="jquery-2.1.1.min.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function () {
            var websocket = new WebSocket('ws://localhost:1337', 'echo-protocol');

            websocket.onmessage = function (evt) {
                var element = jQuery('<li>' + evt.data + '</li>');
                jQuery("#messages").append(element);
            };

            jQuery.getJSON('messages', function (data) {
                var list = '';
                data.forEach(function (message) {
                    list += '<li>' + message + '</li>';
                });
                jQuery('#messages').html(list);
            });

            jQuery("#messageForm").on('submit', function (event) {
                event.preventDefault();
                websocket.send(jQuery("#message").val());
            });
        });
    </script>
</head>
<body>
<ul id="messages">

</ul>

<form id="messageForm">
    <label for="message">Message : </label>
    <input type="text" id="message"/>
    <input type="submit"/>
</form>
</body>
</html>